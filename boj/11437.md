# BOJ 11437 - LCA

## ğŸ“Œ ë¬¸ì œ ë§í¬
[https://www.acmicpc.net/problem/11437](https://www.acmicpc.net/problem/11437)

---

## ğŸ“– ë¬¸ì œ ìš”ì•½
- ë£¨íŠ¸ê°€ 1ì¸ íŠ¸ë¦¬ê°€ ì£¼ì–´ì§.
- ë‘ ë…¸ë“œ `a`, `b`ê°€ ì£¼ì–´ì§ˆ ë•Œ, **ê°€ì¥ ê°€ê¹Œìš´ ê³µí†µ ì¡°ìƒ(LCA)**ì„ êµ¬í•˜ëŠ” ë¬¸ì œ.
- íŠ¸ë¦¬ì˜ í¬ê¸°: ìµœëŒ€ `50,000` ë…¸ë“œ, ì¿¼ë¦¬ ìµœëŒ€ `10,000`.

---

## ğŸ’¡ ì ‘ê·¼ ë°©ë²•
1. **íŠ¸ë¦¬ ì…ë ¥ ë°›ê¸°**
   - ì¸ì ‘ ë¦¬ìŠ¤íŠ¸ë¡œ íŠ¸ë¦¬ë¥¼ ì €ì¥.

2. **ë¶€ëª¨ì™€ ê¹Šì´ ê³„ì‚°**
   - DFS ë˜ëŠ” BFSë¥¼ í†µí•´ ê° ë…¸ë“œì˜ ë¶€ëª¨(`parent`)ì™€ ê¹Šì´(`depth`)ë¥¼ ê¸°ë¡.

3. **LCA ì°¾ê¸°**
   - ë‘ ë…¸ë“œ `a`, `b`ì˜ ê¹Šì´ê°€ ë‹¤ë¥´ë©´ â†’ ë” ê¹Šì€ ìª½ì„ ë¶€ëª¨ë¡œ ì˜¬ë ¤ì„œ ê¹Šì´ ë§ì¶”ê¸°.
   - ê¹Šì´ê°€ ê°™ì•„ì§€ë©´ â†’ ë™ì‹œì— ë¶€ëª¨ë¡œ ì˜¬ë¦¬ë©° ì²˜ìŒ ë§Œë‚˜ëŠ” ë…¸ë“œê°€ LCA.

---

## â±ï¸ ì‹œê°„ ë³µì¡ë„
- ì „ì²˜ë¦¬(DFS): `O(N)`
- ì¿¼ë¦¬(LCA íƒìƒ‰): `O(N)` ìµœì•… (íŠ¸ë¦¬ ê¹Šì´ë§Œí¼)
- N=50,000, Q=10,000 â†’ ì¶©ë¶„íˆ í†µê³¼ ê°€ëŠ¥.

---

## ğŸ“ í’€ì´ ì½”ë“œ (Java)

```java
import java.io.*;
import java.util.*;

public class Main {
    static int N, M;
    static ArrayList<Integer>[] tree;
    static int[] parent, depth;
    static boolean[] visited;

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(System.out));

        N = Integer.parseInt(br.readLine());
        tree = new ArrayList[N + 1];
        for (int i = 1; i <= N; i++) tree[i] = new ArrayList<>();

        for (int i = 0; i < N - 1; i++) {
            StringTokenizer st = new StringTokenizer(br.readLine());
            int a = Integer.parseInt(st.nextToken());
            int b = Integer.parseInt(st.nextToken());
            tree[a].add(b);
            tree[b].add(a);
        }

        parent = new int[N + 1];
        depth = new int[N + 1];
        visited = new boolean[N + 1];

        dfs(1, 0, 0);

        M = Integer.parseInt(br.readLine());
        for (int i = 0; i < M; i++) {
            StringTokenizer st = new StringTokenizer(br.readLine());
            int a = Integer.parseInt(st.nextToken());
            int b = Integer.parseInt(st.nextToken());
            bw.write(LCA(a, b) + "\n");
        }

        br.close();
        bw.flush();
        bw.close();
    }

    static void dfs(int node, int par, int d) {
        visited[node] = true;
        parent[node] = par;
        depth[node] = d;

        for (int next : tree[node]) {
            if (!visited[next]) dfs(next, node, d + 1);
        }
    }

    static int LCA(int a, int b) {
        // ê¹Šì´ ë§ì¶”ê¸°
        while (depth[a] > depth[b]) a = parent[a];
        while (depth[b] > depth[a]) b = parent[b];

        // ê°™ì€ ê¹Šì´ì—ì„œ ë™ì‹œì— ë¶€ëª¨ë¡œ ì´ë™
        while (a != b) {
            a = parent[a];
            b = parent[b];
        }
        return a;
    }
}
```