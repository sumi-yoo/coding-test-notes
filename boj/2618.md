# BOJ 2618 - ê²½ì°°ì°¨

[ğŸ”— ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/2618)

---

## ë¬¸ì œ í•´ì„¤
- `n Ã— n` í¬ê¸°ì˜ ë„ì‹œ, 1ë²ˆ ê²½ì°°ì°¨ëŠ” `(1,1)`ì—ì„œ ì¶œë°œ, 2ë²ˆ ê²½ì°°ì°¨ëŠ” `(n,n)`ì—ì„œ ì¶œë°œ.
- `w`ê°œì˜ ì‚¬ê±´ì´ ìˆœì„œëŒ€ë¡œ ë°œìƒí•˜ë©°, ê° ê²½ì°°ì°¨ëŠ” ì‚¬ê±´ì„ í•´ê²°í•˜ëŸ¬ ì´ë™ ê°€ëŠ¥.
- í•œ ì‚¬ê±´ì€ ë°˜ë“œì‹œ í•œ ê²½ì°°ì°¨ê°€ ì²˜ë¦¬í•´ì•¼ í•˜ë©°, ê° ì‚¬ê±´ì€ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬.
- ë‘ ê²½ì°°ì°¨ê°€ í˜‘ë ¥í•˜ì—¬ **ì´ ì´ë™ ê±°ë¦¬ì˜ í•©ì„ ìµœì†Œí™”**í•˜ëŠ” ë°©ë²•ê³¼,
  ê° ì‚¬ê±´ì„ **ì–´ëŠ ê²½ì°°ì°¨ê°€ ë§¡ëŠ”ì§€** ê²½ë¡œë¥¼ ì¶œë ¥.

## í’€ì´ ì•„ì´ë””ì–´
1. **DP ì •ì˜**
   - `dp[a][b]` : 1ë²ˆ ê²½ì°°ì°¨ê°€ `a`ë²ˆì§¸ ì‚¬ê±´ì„, 2ë²ˆ ê²½ì°°ì°¨ê°€ `b`ë²ˆì§¸ ì‚¬ê±´ì„ ì²˜ë¦¬í–ˆì„ ë•Œì˜ ìµœì†Œ ì´ë™ ê±°ë¦¬.
   - í˜„ì¬ ì²˜ë¦¬í•´ì•¼ í•  ì‚¬ê±´ ë²ˆí˜¸ = `max(a, b) + 1`.
   - ì‚¬ê±´ ë²ˆí˜¸ `0`ì€ "ì•„ì§ ì²˜ë¦¬ ì•ˆ í•¨"ì„ ì˜ë¯¸í•˜ë©°, 1ë²ˆ ê²½ì°°ì°¨ì˜ ì‹œì‘ ìœ„ì¹˜ `(1,1)`ê³¼ 2ë²ˆ ê²½ì°°ì°¨ì˜ ì‹œì‘ ìœ„ì¹˜ `(n,n)`ì—ì„œ ì¶œë°œ.

2. **ì í™”ì‹**
   - í˜„ì¬ ì‚¬ê±´ ë²ˆí˜¸ = `nextEvent`
   - 1ë²ˆ ê²½ì°°ì°¨ê°€ ì²˜ë¦¬í•  ê²½ìš°:
     ```
     dp[a][b] = min(dp[a][b], dist(posA, event[nextEvent]) + dp[nextEvent][b])
     ```
   - 2ë²ˆ ê²½ì°°ì°¨ê°€ ì²˜ë¦¬í•  ê²½ìš°:
     ```
     dp[a][b] = min(dp[a][b], dist(posB, event[nextEvent]) + dp[a][nextEvent])
     ```

3. **ê±°ë¦¬ ê³„ì‚°**
   - `dist(p1, p2) = |x1 - x2| + |y1 - y2|` (ë§¨í•´íŠ¼ ê±°ë¦¬)

4. **ê²½ë¡œ ë³µì›**
   - `path[a][b]`ì— ë‹¤ìŒ ì‚¬ê±´ì„ ëˆ„ê°€ ì²˜ë¦¬í–ˆëŠ”ì§€ ì €ì¥(1ë²ˆ ê²½ì°°ì°¨ or 2ë²ˆ ê²½ì°°ì°¨).
   - DP ê³„ì‚°ì´ ëë‚˜ë©´ `(0, 0)`ë¶€í„° ì‹œì‘í•´ pathë¥¼ ë”°ë¼ê°€ë©° ì‚¬ê±´ ë°°ì • ê²½ë¡œ ì¶œë ¥.

## ì‹œê°„ ë³µì¡ë„
- ì‚¬ê±´ ìˆ˜ `w`ì— ëŒ€í•´ DP í…Œì´ë¸” í¬ê¸°ëŠ” `(w+1) Ã— (w+1)`.
- ê° ìƒíƒœì—ì„œ O(1) ì—°ì‚°ì´ë¯€ë¡œ **O(wÂ²)**.

## Java ì½”ë“œ
```java
import java.io.*;
import java.util.*;

public class Main {

    static int N, W;
    static Point[] events;
    static int[][] dp, choice;
    static BufferedWriter bw;

    static class Point {
        int x, y;

        Point(int x, int y) {
            this.x = x;
            this.y = y;
        }
    }

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        bw = new BufferedWriter(new OutputStreamWriter(System.out));

        N = Integer.parseInt(br.readLine());
        W = Integer.parseInt(br.readLine());

        events = new Point[W + 1];
        for (int i = 1; i <= W; i++) {
            StringTokenizer st = new StringTokenizer(br.readLine());
            int x = Integer.parseInt(st.nextToken());
            int y = Integer.parseInt(st.nextToken());
            events[i] = new Point(x, y);
        }

        dp = new int[W + 1][W + 1];
        for (int[] row : dp) Arrays.fill(row, -1);
        choice = new int[W + 1][W + 1];
        bw.write(solve(0, 0) + "\n");

        dfs(0, 0);

        bw.flush();
        bw.close();
        br.close();
    }

    static int solve(int a, int b) {
        int next = Math.max(a, b) + 1;
        if (next > W) return 0;

        if (dp[a][b] != -1) return dp[a][b];

        Point posA = (a == 0) ? new Point(1, 1) : events[a];
        Point posB = (b == 0) ? new Point(N, N) : events[b];

        int distA = getDist(posA, events[next]) + solve(next, b);
        int distB = getDist(posB, events[next]) + solve(a, next);

        if (distA <= distB) {
            dp[a][b] = distA;
            choice[a][b] = 1;
        } else {
            dp[a][b] = distB;
            choice[a][b] = 2;
        }

        return dp[a][b];
    }

    static int getDist(Point p1, Point p2) {
        return Math.abs(p1.x - p2.x) + Math.abs(p1.y - p2.y);
    }

    static void dfs(int a, int b) throws IOException {
        int next = Math.max(a, b) + 1;
        if (next > W) return;

        bw.write(choice[a][b] + "\n");
        if (choice[a][b] == 1) {
            dfs(next, b);
        } else {
            dfs(a, next);
        }
    }
}
```